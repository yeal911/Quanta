<Window x:Class="Quanta.Views.CommandSettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="命令设置"
        Height="500" Width="700" 
        WindowStartupLocation="CenterOwner"
        WindowStyle="None" 
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="CanResize"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Window.Resources>
        <Style TargetType="TextBlock">
            <Setter Property="FontFamily" Value="微软雅黑"/>
            <Setter Property="FontSize" Value="13"/>
        </Style>
        
        <Style TargetType="TextBox">
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="FontFamily" Value="微软雅黑"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="BorderBrush" Value="#DDD"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
        
        <Style TargetType="Button">
            <Setter Property="Background" Value="#0078D4"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontFamily" Value="微软雅黑"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Height" Value="28"/>
            <Setter Property="MinWidth" Value="60"/>
        </Style>
        
        <Style x:Key="Btn" TargetType="Button">
            <Setter Property="Background" Value="#EEE"/>
            <Setter Property="Foreground" Value="#333"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontFamily" Value="微软雅黑"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Height" Value="28"/>
            <Setter Property="MinWidth" Value="60"/>
        </Style>
    </Window.Resources>

    <Border Background="White" CornerRadius="4" BorderBrush="#DDD" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="50"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Border Grid.Row="0" Background="#F5F5F5" CornerRadius="4,4,0,0">
                <Grid Margin="15,0">
                    <TextBlock Text="命令设置" FontSize="14" FontWeight="SemiBold" VerticalAlignment="Center"/>
                    <Button Content="✕" HorizontalAlignment="Right" Background="Transparent" Foreground="#666" 
                            Padding="8,4" Click="Cancel_Click" FontSize="14"/>
                </Grid>
            </Border>
            
            <!-- Content -->
            <Grid Grid.Row="1" Margin="15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Hotkey and Buttons Row -->
                <Grid Grid.Row="0" Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Hotkey Settings (Left 50%) -->
                    <Border Grid.Column="0" Background="#F5F5F5" CornerRadius="4" Padding="12" Margin="0,0,8,0">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0" Text="快捷键：" FontWeight="SemiBold" VerticalAlignment="Center" Margin="0,0,8,0"/>
                            <TextBox x:Name="HotkeyTextBox" Grid.Column="1" Text="请按下快捷键..." 
                                     IsReadOnly="True" VerticalAlignment="Center" Padding="8,4"
                                     Background="White" BorderBrush="#DDD" FontSize="12" FontFamily="微软雅黑"
                                     PreviewKeyDown="HotkeyTextBox_PreviewKeyDown" GotFocus="HotkeyTextBox_GotFocus"/>
                        </Grid>
                    </Border>
                    
                    <!-- Buttons (Right 50%) -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="8,0,0,0">
                        <Button Content="添加" Click="AddCommand_Click" Margin="0,0,6,0"/>
                        <Button Content="删除" Style="{StaticResource Btn}" Click="DeleteCommand_Click" Margin="0,0,6,0"/>
                        <Button Content="保存" Click="SaveCommand_Click"/>
                    </StackPanel>
                </Grid>
                
                <!-- Commands DataGrid -->
                <TextBlock Grid.Row="1" Text="自定义命令" FontWeight="SemiBold" Margin="0,0,0,8"/>
                
                <DataGrid Grid.Row="1" x:Name="CommandsGrid" ItemsSource="{Binding Commands}"
                          AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False"
                          HeadersVisibility="Column" GridLinesVisibility="Horizontal"
                          RowHeight="32" FontSize="12" FontFamily="微软雅黑"
                          BorderThickness="1" BorderBrush="#DDD">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="关键字" Binding="{Binding Keyword}" Width="80"/>
                        <DataGridTextColumn Header="名称" Binding="{Binding Name}" Width="100"/>
                        <DataGridTextColumn Header="类型" Binding="{Binding Type}" Width="70"/>
                        <DataGridTextColumn Header="路径/URL" Binding="{Binding Path}" Width="*"/>
                        <DataGridTextColumn Header="参数" Binding="{Binding Arguments}" Width="80"/>
                        <DataGridCheckBoxColumn Header="启用" Binding="{Binding Enabled}" Width="50"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
            
            <!-- Footer -->
            <Border Grid.Row="2" Background="#F9F9F9" CornerRadius="0,0,4,4" BorderBrush="#EEE" BorderThickness="0,1,0,0">
                <TextBlock Text="拖动标题栏移动 | 输入关键字搜索 | 回车执行" 
                           Foreground="#999" FontSize="11" Margin="15,0" VerticalAlignment="Center"/>
            </Border>
        </Grid>
    </Border>
</Window>